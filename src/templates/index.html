<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ratatoskr</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
    <div class="header">
        <h1>Ratatoskr</h1>
    </div>
    <div class="container">
        <div class="interaction-box">
            <!-- <div class="header">
                <img src="{{ url_for('static', filename='images/ratatoskr.jpg') }}" alt="Image" style="width: 15%; height: 15%; border-radius: 50%;">
                <h1>Ratatoskr</h1>
            </div> -->
            <!-- <div class="readme">
                <h3>Guide</h3>
                <p>Query different assets, such as Wikipedia, databases, and the internet. Enrich the results with LLMs to generate more informative and comprehensive responses.</p>
            </div> -->
            <form class="chat-form">
                <h3 style="color:#66c2ff">Dialog</h3>
                <br>
                <!-- User Information -->
                <fieldset class="input-group">
                    <legend>User Information</legend>
                    <div class="user-info-row">
                        <div class="user-info-item">
                            <label for="user">User</label>
                            <input type="text" id="user" name="user">
                        </div>
                        <div class="user-info-item">
                            <label for="session">Session UUID</label>
                            <input type="text" id="session" name="session">
                        </div>
                        <div class="user-info-item">
                            <label>New Session</label>
                            <button type="button" id="reset-uuid-button" onclick="setUUID()">New UUID</button>
                        </div>
                    </div>
                </fieldset>

                <!-- Model Selection -->
                <fieldset class="input-group">
                    <legend>Model Selection</legend>
                    <div>
                        <select id="model" name="model">
			                <option value="llama3:70b">llama3:70b</option>
                            <option value="llama3">llama3</option>
			                <option value="dolphin-mixtral">dolphin-mixtral</option>
                            <option value="mistral:latest">mistral:latest</option>
                            <option value="llama2:13b">llama2:13b</option>
                            <option value="codellama:13b">codellama:13b</option>
                        </select>
                    </div>
                </fieldset>

                <!-- Query Enrichment Features -->
                <fieldset class="input-group">
                    <legend>Enable or disable enrichment features for query</legend>
                    <div class="checkbox-grid">
                        <div class="checkbox-item">
                            <input type="checkbox" id="use_rag_database" name="use_rag_database"><!--checked-->
                            <label for="database">Use local RAG database.</label>
                        </div>
                        <!-- <div class="checkbox-item">
                            <input type="checkbox" id="internet" name="internet">
                            <label for="internet">Internet</label>
                        </div> -->
                        <!-- <div class="checkbox-item">
                            <input type="checkbox" id="wikipedia" name="wikipedia">
                            <label for="wikipedia">Wikipedia</label>
                        </div> -->
                    </div>
                </fieldset>

                <!-- Query Input and Output -->
                <fieldset class="input-group">
                    <legend>Query</legend>
                    <div>
                        <label for="query">Query:</label>
                        <textarea id="query" name="query" rows="10"></textarea>
                    </div>
                    <div id="loading" style="display: none; text-align: center;"><img src="{{ url_for('static', filename='images/ratatoskr_loading.gif') }}" alt="Image" width="60" height="35" style="border-radius: 50%;"></div>
                    <div>
                        <label for="response">Response:</label>
                        <textarea id="response" name="response" rows="10" readonly></textarea>
                    </div>
                </fieldset>

                <div class="input-group">
                    <input type="button" value="Submit" onclick="sendQuery()">
                </div>
            </form>
        </div>

        <!-- Query Only RAG Section -->
        <div class="interaction-box">
            <form class="query-rag-form">
                <h3 style="color:#66c2ff">Query Only RAG</h3>
                <br>
                
                <!-- Query Input -->
                <fieldset class="input-group">
                    <legend>Query</legend>
                    <div>
                        <label for="query-rag">Query:</label>
                        <textarea id="query-rag" name="query-rag" rows="10"></textarea>
                    </div>
                </fieldset>
                
                <!-- Query Output -->
                <fieldset class="input-group">
                    <legend>Query Output</legend>
                    <div>
                        <label for="response-rag">Response:</label>
                        <textarea id="response-rag" name="response-rag" rows="10" readonly></textarea>
                    </div>
                </fieldset>

                <!-- Submit Query Button -->
                <div class="input-group">
                    <input type="button" value="Submit Query" onclick="sendQueryRAG()">
                </div>
            </form>
        </div>

        <!-- Summarize based on source -->
        <div class="interaction-box">
            <form>
              <h3 style="color:#66c2ff">Summarize based on sources</h3>
                <br>
              <div class="source-summarization">
                <fieldset class="input-group">
                  <legend>Define Sources</legend>
                  <div class="source-definition-and-button" style="display: flex; align-items: center;">
                    <label for="sources" style="margin-right: 10px;">Sources:</label>
                    <input type="text" id="sources" name="sources" placeholder="Enter comma-separated source files or URLs" style="flex-grow: 1; margin-right: 10px;" />
                  </div>
                    <label for="text-summary" style="margin-right: 10px;">Text Summary:</label>
                    <textarea id="text-summary" name="text-summary" rows="10"></textarea>
                  <div class="input-group">
                    <!--<input type="button" value="Summarize Sources" onclick="summarizeSources()">-->
                  </div>
                </fieldset>
              </div>
            </form>
          </div>
      
        <!-- Indexing Section -->
        <!-- <div class="interaction-box">
            <form>
                <h3 style="color:#66c2ff">Index new data to local retrieval-augmented generation</h3>
                <div class="upload-link-section">
                    <fieldset class="upload">
                        <legend>File Upload</legend>
                        <label>Select a (txt, pdf, json, md, csv) file:</label>
                        <form action="/upload" method="post" enctype="multipart/form-data">
                            <input type="file" name="file">
                            <input type="submit" value="Upload">
                        </form>
                    </fieldset>
                    <fieldset class="input-group">
                        <legend>Submit Link for indexing to RAG</legend>
                        <div class="link-submission">
                            <label for="link">Url link:</label>
                            <input type="url" id="link" name="link" placeholder="Enter the link to be indexed">
                            <button type="button" id="submit-link-button" onclick="submitLink()">Submit Link</button>
                        </div>
                    </fieldset>
                </div>
            </form>
        </div> -->
    </div>

    <script src="{{ url_for('static', filename='js/ratatoskr.js') }}"></script>
</body>

</html>
